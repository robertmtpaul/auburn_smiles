'use strict';(function(A,c,x,m){let q=!1,e=null,r=!0,y=!0,p=!1,d=null;const f=Object.assign({speed:900,element:"module_row",offset:null,navigation:"#main-nav,.module-menu .nav",updateHash:!0},tbLocalScript.scrollHighlight),k=parseInt(f.offset),g=x.top,n=m.getElementById("headerwrap"),w={init(b){r=null!==n&&c.body[0].classList.contains("fixed-header-enabled")||0<k;if(!1===p){const a=g.location.hash.replace("#","");if(a&&"#"!==a){let b=u(m.querySelectorAll("."+f.element+'[data-anchor="'+a+'"]'));b&&
this.scrollTo(b,a)}else k&&c.scrollTo(k,f.speed);p=!0}this.createObserver(b)},changeHash(){if(!1===q){const a=g.location.hash.replace("#",""),l=m.querySelectorAll(f.navigation);for(let c=l.length-1;-1<c;--c){let h=l[c].getElementsByClassName("current-menu-item");for(var b=h.length-1;-1<b;--b)null===d&&(d=h[b].getElementsByTagName("a")[0].getAttribute("href")),h[b].classList.remove("current_page_item","current-menu-item");(h=""!==a&&"#"!==a?l[c].querySelectorAll('a[href*="#'+a+'"]'):null)&&0!==h.length||
(h=l[c].querySelectorAll('a[href="'+d+'"]'));for(b=h.length-1;-1<b;--b){let a=h[b].parentNode;a.classList.add("current-menu-item");a.classList.contains("menu-item-object-page")&&a.classList.add("current_page_item")}}null===d&&(d=g.location.href.split("#")[0])}},calculatePosition(b){b=A(b).offset().top+2;if(!0===r)if(k)b-=k-2;else if(n.classList.contains("fixed-header")){const a=n.getBoundingClientRect().bottom+2;b>=a&&(b-=a)}return b},scrollTo(b,a){q=!0;c.lazyScroll(c.convert(c.selectWithParent("[data-lazy]",
b)).reverse(),!0);const l=c.lazyScrolling,v=this,h=!1===p,e=function(){const e=z(),d=m.getElementsByClassName(f.element),p=new IntersectionObserver(function(a,b){for(let b=a.length-1;-1<b;--b)!0===a[b].isIntersecting&&c.lazyScroll(c.convert(c.selectWithParent("[data-lazy]",a[b].target)).reverse(),!0);b.disconnect()},{rootMargin:"300px 0px 300px 0px",threshold:.1});for(let a=d.length-1;-1<a;--a)d[a].hasAttribute("data-lazy")&&!d[a].classList.contains("hide-"+e)&&p.observe(d[a]);!0===r&&(k||n.classList.contains("fixed-header"))&&
c.scrollTo(v.calculatePosition(b),f.speed);c.lazyScrolling=l;q=!1;!1===h&&(a=b.hasAttribute("data-hide-anchor")?"":"#"+a.replace("#",""),g.history.replaceState(null,null,a));t()},d=!0!==r||!k&&n.classList.contains("fixed-header")?null:function(){(k||n.classList.contains("fixed-header"))&&c.scrollTo(v.calculatePosition(b),f.speed,e)};c.lazyScrolling=!0;c.scrollTo(v.calculatePosition(b),f.speed,e,d)},createObserver(b){if(f.updateHash){null===e&&(e=new x.IntersectionObserver(function(a,b){if(!1===q){b=
!1;for(let c=0,l=a.length;c<l;++c)!0===a[c].isIntersecting&&(b=a[c].target.getAttribute("data-anchor"));!1===b?!1===y?g.history.replaceState(null,null," "):y=!1:(g.history.replaceState(null,null,"#"+b),t())}},{rootMargin:"0px 0px -100%",thresholds:[0,1]}));b=c.selectWithParent(f.element,b);for(let a=b.length-1;-1<a;--a)if(!b[a].hasAttribute("data-hide-anchor")){let c=b[a].getAttribute("data-anchor");c&&"#"!==c&&e.observe(b[a])}}}},z=function(){const b=c.w,a=tbLocalScript.breakpoints;for(let c in a)if(Array.isArray(a[c])){if(b>=
a[c][0]&&b<=a[c][1])return c}else if(b<=a[c])return c;return"desktop"},u=function(b){if(!b[1])return b[0]?b[0]:null;let a=z();for(let c=0,d=b.length;c<d;++c)if(!b[c].classList.contains("hide-"+a))return b[c];return null},t=function(){w.changeHash()};c.on("tb_scroll_highlight_enable",function(){g.addEventListener("hashchange",t,{passive:!0});c.body.on("click.tb_scroll_highlight",'[href*="#"]',function(b){var a=this.getAttribute("href");if(""!==a&&null!==a&&"#"!==a&&(a=new URL(a,g.location),a.hostname===
g.location.hostname&&a.hash&&a.pathname===g.location.pathname&&(a=a.hash,""!==a&&"#"!==a))){const d=u(m.querySelectorAll("."+f.element+'[data-anchor="'+a.replace("#","")+'"]'));if(d||u(m.querySelectorAll(a+".module,"+a+".module_row")))c.trigger("tf_side_menu_hide_all"),d&&(b.preventDefault(),b.stopPropagation(),w.scrollTo(d,a))}})}).on("tb_scroll_highlight_disable",function(){e&&(e.disconnect(),e=null);g.removeEventListener("hashchange",t,{passive:!0});c.body.off("click.tb_scroll_highlight")}).on("tb_init_scroll_highlight",
function(b){w.init(b);c.trigger("tb_scroll_highlight_enable")})})(jQuery,Themify,window,document);
